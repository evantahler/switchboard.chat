# managed by ansible

check process nginx with pidfile /var/run/nginx.pid
  start program = "/etc/init.d/nginx start"
  stop program  = "/etc/init.d/nginx stop"

  if mem is greater than 80% for 5 cycles
    then alert
  else if passed for 3 cycles
    then alert

  if totalmemory is greater than 80% for 5 cycles
    then alert
  else if passed for 3 cycles
    then alert

  if cpu is greater than 50% for 5 cycles
    then alert
  else if passed for 3 cycles
    then alert

  if totalcpu is greater than 50% for 5 cycles
    then alert
  else if passed for 3 cycles
    then alert

  if uptime < 1 minutes for 3 cycles
    then alert
  else if passed for 3 cycles
    then alert
